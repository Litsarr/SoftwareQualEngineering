<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout Page</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container-fluid">
    <div class="row">
      <!-- Order Summary -->
      <div class="col-md-4 bg-primary text-white p-4">
        <h2>Order Summary</h2>
        <div id="order-summary" class="order-summary">
          <!-- Dynamically rendered order items will appear here -->
        </div>
        <h3 class="mt-5">Total Bill: <span id="total-bill">$0</span></h3>
      </div>

      <!-- Form Section -->
      <div class="col-md-8 p-4">
        <h2>Complete your order</h2>
        <form id="checkout-form">
          <!-- Personal Details -->
          <h4>Personal Details</h4>
          <div class="row mb-3">
            <div class="col-md-6">
              <label for="firstName" class="form-label">First Name</label>
              <input type="text" class="form-control" id="firstName" placeholder="Enter Your First Name" required>
            </div>
            <div class="col-md-6">
              <label for="lastName" class="form-label">Last Name</label>
              <input type="text" class="form-control" id="lastName" placeholder="Enter Your Last Name" required>
            </div>
          </div>
          <!-- Payment Details -->
          <h4>Payment Details</h4>
          <div class="row mb-3">
            <div class="col-md-6">
              <label for="cardName" class="form-label">Card Holder Name</label>
              <input type="text" class="form-control" id="cardName" placeholder="Enter Your Name" required>
            </div>
            <div class="col-md-6">
              <label for="cardNumber" class="form-label">Card Number</label>
              <input type="text" class="form-control" id="cardNumber" placeholder="Enter Card Number" required>
            </div>
          </div>
          <!-- Shipping Address -->
          <h4>Shipping Address</h4>
          <div class="mb-3">
            <label for="address1" class="form-label">Address Line 1</label>
            <input type="text" class="form-control" id="address1" placeholder="Enter Your Address" required>
          </div>
          <div class="row mb-3">
            <div class="col-md-6">
              <label for="city" class="form-label">City</label>
              <input type="text" class="form-control" id="city" placeholder="Enter Your City" required>
            </div>
            <div class="col-md-6">
              <label for="postalCode" class="form-label">Postal Code</label>
              <input type="text" class="form-control" id="postalCode" placeholder="Enter Postal Code" required>
            </div>
          </div>
          <!-- Buttons -->
          <div class="d-flex justify-content-between">
            <button type="reset" class="btn btn-outline-danger">Cancel</button>
            <button type="submit" class="btn btn-primary">Complete Purchase</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    // Fetch cart items from localStorage
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    
    // Function to render order summary
    function renderOrderSummary() {
      const orderSummary = document.getElementById('order-summary');
      const totalBill = document.getElementById('total-bill');
      orderSummary.innerHTML = '';
      
      if (cart.length === 0) {
        orderSummary.innerHTML = '<p>Your cart is empty.</p>';
        totalBill.innerText = '$0';
        return;
      }

      let total = 0;
      cart.forEach(item => {
        const itemTotal = item.price * item.quantity;
        total += itemTotal;

        const itemHTML = `
          <div class="order-item d-flex align-items-center mb-3">
            <img src="${item.image}" alt="${item.name}" class="img-fluid me-3" style="max-width: 80px;">
            <div>
              <p>${item.name}</p>
              <p>Quantity: ${item.quantity}</p>
              <p>Total Price: $${itemTotal.toFixed(2)}</p>
            </div>
          </div>
        `;
        orderSummary.innerHTML += itemHTML;
      });

      totalBill.innerText = `$${total.toFixed(2)}`;
    }

    // Handle form submission
    document.getElementById('checkout-form').addEventListener('submit', function (e) {
      e.preventDefault();
      alert('Thank you for your purchase! Your order has been placed.');
      localStorage.removeItem('cart'); // Clear the cart
      window.location.href = 'order-confirmation.html'; // Redirect to confirmation page
    });

    // Initial render
    renderOrderSummary();
  </script>
</body>
</html>
